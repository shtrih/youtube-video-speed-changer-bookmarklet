/*! 
 * Bookmarklet to change the speed (or playback rate) of YouTube Videos
 * but it should work on any other website with HTML5 video tags
 * 
 * Copyright(c) 2014 Chris Cinelli 
 * MIT Licensed. 
 * 
 * @author: Chris Cinelli
 * 
 * Original code: https://github.com/chriscinelli/youtube-video-speed-change-bookmarlet
 * This code: https://github.com/shtrih/youtube-video-speed-changer-bookmarklet
 */
!function(e,o){const t="_yvscb_memory";function n(o,t){return(t||e).querySelectorAll(o)}function i(e){try{return e.contentWindow?e.contentWindow.document:e.contentDocument}catch(o){return console.log("iframe document is not reachable: "+e.src),!1}}let a=100;let l=n("video")[0];if(!l){let e=n("iframe");if(e.length>0)for(let o=0;o<e.length;o++){let t=i(e[o]);if(t&&(l=n("video",t)[0]))break}}const r=n("body")[0],p=n("#_yvscb_control")[0];if(p)return r.removeChild(p),void(l&&(l.playbackRate=1));if(!l)return void alert("This page does not have any HTML5 videos or they are not reachable!");if(!l.playbackRate)return void alert("This browser does not support changes of playback rate on HTML5 videos! Try Google Chrome!");const d=e.createElement("div"),u="box-sizing:border-box;",c=";color:#101010;background-color:#eee;border:1px solid #333;border-radius:3px;margin:2px;"+u,s=c+";padding:2px 3px";d.setAttribute("id","_yvscb_control"),d.innerHTML='<div style="font:12px monospace;position:fixed;left:2px;top:2px;z-index:2139999999;box-shadow:1px 1px 4px #666;color:#101010;background-color:#eee;border:1px solid #333;border-radius:3px;margin:2px;box-sizing:border-box;;padding:2px"><button class="minus" style="'+s+'">-</button><input type="number" style="border:0;padding:0;background-color:#eee;height:26px;margin:2px;width:100px;'+u+'" step="5">%<button class="plus" style="'+s+'">+</button><br /><input type="range" style="width:100%;padding:2px;margin:0;'+u+'" min="10" max="300" step="5" list="tickmarks" /><datalist id="tickmarks"><option value="25" label="×0.25"></option><option value="50" label="×0.5"></option><option value="75" label="×0.75"></option><option value="100" label="×1.0"></option><option value="125" label="×1.25"></option><option value="150" label="×1.5"></option><option value="175" label="×1.75"></option><option value="200" label="×2.0"></option><option value="225" label="×2.25"></option><option value="250" label="×2.5"></option><option value="300" label="×3.0"></option>      </datalist></div>',r.appendChild(d);const b=n("input[type=range]",d)[0],v=n("input[type=number]",d)[0];function g(e){var o;e=parseInt(e),v.value=e,b.value=e,l.playbackRate=e/100,a=o=e,localStorage.setItem(t,o)}b.addEventListener("input",function(e){g(e.target.value)}),v.addEventListener("change",function(e){g(e.target.value)}),n(".minus",d)[0].addEventListener("click",function(){g(parseInt(v.value)-5)}),n(".plus",d)[0].addEventListener("click",function(){g(parseInt(v.value)+5)}),g(localStorage.getItem(t)||a)}(document,window);
